# 水槽ARアプリケーション 開発ロードマップ

## プロジェクト概要

Three.jsとWebXRを活用した水槽ARアプリケーション。水槽レイアウトエディタとAR表示機能を中心とした、アクアリウム愛好者向けのツール。

### 主要機能
- 水槽レイアウトエディタ（パーツ配置、移動、回転）
- ARビュー機能（作成したレイアウトのAR表示）
- データ保存機能（レイアウトの保存と読み込み）

## 開発フェーズ

### ✅ フェーズ1: 主要機能の定義（2週間）
- コア機能の特定と基本要件の定義
- 開発優先順位の決定
- 必要な技術スタックの選定

### ✅ フェーズ2: 技術検証

#### ✅ 2.1 開発環境構築（3日間）
- React + TypeScript + Vite環境のセットアップ
- ESLint + Prettier設定
- GitHub リポジトリ設定
- 基本的な型チェックのGitHub Actions設定

#### ✅ 2.2 エディタの基本機能実装（5日間）
**水槽の基本機能**
- ✅ 水槽の3D表示
- ✅ 水槽のサイズ変更
- ✅ 視点の回転・ズーム操作
- ✅ グリッド表示による配置補助

**オブジェクト管理機能**
- ✅ オブジェクト（水草、石、流木など）の一覧表示
- ✅ オブジェクトの水槽内への配置
- ✅ 配置したオブジェクトの選択
- ✅ 選択解除機能（空きスペースクリック、再クリック）
- ✅ 選択したオブジェクトの発光表示
- ✅ 選択したオブジェクトの移動・回転・削除
- ✅ アイテム一覧からエディタへの追加

**基本的なUI機能**
- ✅ オブジェクトパレット
- ✅ 操作モード切り替え（移動、回転、スケール）
- ✅ 基本的な操作説明の表示

### 🔄 フェーズ3: モデル管理機能実装（5日間）【現在進行中】

#### 実装予定項目
1. **モデルプレビューコンポーネントの作成**
   - ModelPreview.tsxコンポーネント作成
   - Fileオブジェクトを受け取りThree.jsで表示

2. **モデルローダーの実装**
   - GLTFLoader：.gltf/.glbファイル用
   - OBJLoader：.objファイル用
   - 読み込み状態管理（ロード中、エラー表示）

3. **UI統合**
   - ModelUploaderにプレビュー機能追加
   - ObjectListへのプレビュー表示
   - アップロードモデルのアイテム一覧統合

4. **最適化とエラー処理**
   - バウンディングボックス計算と中心位置調整
   - サポート外形式のハンドリング
   - パフォーマンス最適化

### 📋 フェーズ4: PC環境での検証（4日間）
- ブラウザ互換性確認（Chrome, Safari, Firefox, Edge）
- 複数モデル配置時の動作確認
- メモリ使用量の推移確認
- FPS測定

### 🔮 フェーズ5: WebXR機能検証（2週間）

#### 5.1 基本AR機能実装（5日間）
- WebXR Device APIの実装
- カメラ映像の取得・表示
- シンプルな3Dモデルのテスト表示
- デバッグ情報の表示機能実装

#### 5.2 モバイル環境での検証（5日間）
- Vercelへのデプロイ設定
- QRコードによるアクセス用ページ作成
- iOS Safari、Android Chrome での動作検証

#### 5.3 AR機能の動作検証（4日間）
- モデル表示の安定性確認
- スケール・位置調整機能
- パフォーマンス測定（FPS、メモリ使用量、バッテリー消費）

## 追加機能要件

### 優先度：高
- **オブジェクトの拡大・縮小機能**：水草や流木のサイズ調整
- **アンドゥ・リドゥ機能**：操作の取り消し・やり直し
- **衝突判定**：オブジェクト同士の重なり防止

### 優先度：中
- **オブジェクトのコピー＆ペースト**：同種オブジェクトの複製
- **視点の保存・復元**：よく使うアングルの保存
- **スナップ機能**：オブジェクトの整列補助

### 優先度：低
- **レイヤー管理**：前景・中景・後景の分類

## 技術要件

### フロントエンド基盤
- **フレームワーク**: React 18
- **言語**: TypeScript
- **ビルドツール**: Vite
- **コード品質管理**: ESLint + Prettier
- **テストフレームワーク**: Vitest

### 3D/AR関連
- **3Dライブラリ**: Three.js
- **ARライブラリ**: WebXR
- **3Dモデルフォーマット**: glTF 2.0

### パフォーマンス要件
- **レンダリング**: 60fps以上のフレームレート維持
- **モバイル対応**: タッチスクリーン、安定動作
- **ネットワーク**: モデルデータの圧縮、キャッシュ戦略

### ブラウザ対応
- Chrome 最新版
- Safari 最新版（iOS含む）
- Firefox 最新版
- Edge 最新版

## Unity移行を見据えた設計

### データ構造設計
- **オブジェクトデータ**: Vector3形式での位置・回転・スケール
- **レイアウトデータ**: JSON形式でのシーン構造保存
- **アセット管理**: glTF/GLB形式の使用

### 機能の段階的実装
- **Web版**: 基本配置・移動・回転、ARビュー、データ保存
- **Unity版**: 物理演算、水流シミュレーション、高度なAR機能

## マネタイズ戦略

1. **アクアリウムレイアウト素材の販売**：3Dデータの有料提供
2. **サブスクリプション**：レイアウト素材チケット制
3. **SNS連携**：レイアウト共有による拡散力向上
4. **EC機能**：ユーザー作成レイアウトの販売プラットフォーム

## 成果物（予定）

### 技術検証フェーズ
- 動作する技術検証用プロトタイプ
- 技術的な課題と解決策のドキュメント
- パフォーマンステスト結果

### 要件定義フェーズ
- 要件定義書
- 画面設計書
- システム設計書
- API仕様書

### 基本実装フェーズ
- 動作するMVP
- ソースコード
- 単体・統合テスト結果
- 技術文書

## 参考サイト
- [sempre3D シミュレーター](https://sempre3d.liviyle.jp/simulator/)

---

**更新日**: 2025-06-29  
**現在のフェーズ**: モデル管理機能実装（2.2）